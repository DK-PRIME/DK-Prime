<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <title>DK Prime — Створити змагання</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="assets/css/main.css">

  <style>
    body{background:#0b0d12;color:#fff;font-family:system-ui}
    .wrap{max-width:980px;margin:26px auto;padding:16px}
    .card{background:#121727;border:1px solid #2a2f45;border-radius:14px;padding:16px;box-shadow:0 10px 28px rgba(0,0,0,.35)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:820px){.row{grid-template-columns:1fr}}
    label{display:block;font-size:.85rem;opacity:.85;margin:10px 0 6px}
    input,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #2a2f45;background:#0b1020;color:#fff}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid #2a2f45;background:#161d33;color:#fff;cursor:pointer}
    .btn:hover{border-color:#f6c34c}
    .btn--primary{background:linear-gradient(135deg,#f6c34c,#cc6a2b);border:none;color:#000;font-weight:800}
    .muted{opacity:.75;font-size:.9rem}
    .msg{margin-top:10px;font-weight:700}
    .msg.ok{color:#43d18a}
    .msg.err{color:#ff6c6c}
    .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.22);font-size:.8rem}
    .sep{height:1px;background:rgba(255,255,255,.08);margin:14px 0}
    .hidden{display:none}
    ul{margin:8px 0 0 18px}
  </style>
</head>
<body>

<div class="wrap">
  <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px">
    <div>
      <h1 style="margin:0">Створити змагання</h1>
      <div class="muted">Пише в Firestore так, щоб STOLAR CARP бачив через <b>seasons/*/stages</b></div>
    </div>
    <a class="btn" href="index.html">← На головну</a>
  </div>

  <div class="card">
    <div class="row">
      <div>
        <label>Що створюємо?</label>
        <select id="kind">
          <option value="season">Сезон (кілька етапів + опціонально фінал)</option>
          <option value="stalker_solo">Сталкер (одиночний)</option>
          <option value="stalker_team">Сталкер (командний)</option>
          <option value="three_tables">Таблиця трьох</option>
          <option value="cup">Кубок STOLAR CARP</option>
          <option value="autumn_carp">Осінній короп STOLAR CARP</option>
          <option value="classic">Звичайні змагання</option>
        </select>
      </div>

      <div>
        <label>Назва (як буде показано на STOLAR CARP)</label>
        <input id="name" placeholder="Напр. Кубок STOLAR CARP 2026 — Етап 1">
      </div>
    </div>

    <div class="row">
      <div>
        <label>ID змагання (латиниця/цифри/_) — якщо пусто, згенерується автоматично</label>
        <input id="compId" placeholder="Напр. sc_cup_2026">
      </div>

      <div style="display:flex;align-items:flex-end;gap:10px">
        <label style="margin:0;display:flex;gap:10px;align-items:center">
          <input id="rule13" type="checkbox" style="width:18px;height:18px">
          <span class="pill">−1 бал за рибу <b>13.000+</b></span>
        </label>
      </div>
    </div>

    <!-- SEASON -->
    <div id="block-season" class="sep"></div>
    <div id="block-season-body">
      <div class="row">
        <div>
          <label>К-ть етапів у сезоні</label>
          <input id="stagesCount" type="number" min="1" max="20" value="5">
        </div>
        <div>
          <label style="margin:0;display:flex;gap:10px;align-items:center;height:100%">
            <input id="hasFinal" type="checkbox" style="width:18px;height:18px">
            <span class="pill">Є фінал</span>
          </label>
        </div>
      </div>

      <div id="finalOpts" class="row hidden">
        <div>
          <label>В залік сезону йдуть кращі результати з N етапів</label>
          <input id="bestOf" type="number" min="1" max="20" value="3">
        </div>
        <div class="muted" style="align-self:end">
          (це тільки правило сезону; відкривання реєстрації буде на сторінці №2)
        </div>
      </div>

      <div class="sep"></div>
      <div class="muted">Авто-етапи які будуть створені:</div>
      <ul id="autoStages"></ul>
    </div>

    <!-- STALKER TEAM -->
    <div id="block-stalker-team" class="hidden">
      <div class="sep"></div>
      <div class="row">
        <div>
          <label>Скільки учасників сталкер (1/2/3)</label>
          <select id="stalkerTeamCount">
            <option value="1">1 (соло — тоді сталкер одиночний окремо не потрібен)</option>
            <option value="2" selected>2 (ділимо на 2 зони)</option>
            <option value="3">3 (ділимо на 3 зони)</option>
          </select>
        </div>
        <div class="muted" style="align-self:end">
          Критерій: сума місць учасників по зонах (менше — краще), тай-брейк: спільна вага.
        </div>
      </div>
    </div>

    <div class="sep"></div>

    <div style="display:flex;gap:10px;flex-wrap:wrap">
      <button class="btn btn--primary" id="btnCreate">Створити</button>
      <button class="btn" id="btnReset" type="button">Скинути</button>
      <div id="msg" class="msg"></div>
    </div>
  </div>

  <div class="muted" style="margin-top:10px">
    Важливо: ця сторінка <b>не відкриває</b> реєстрацію. Всі етапи створюються з <b>isRegistrationOpen=false</b>.
  </div>
</div>

<!-- Firebase COMPAT -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>

<!-- init -->
<script src="firebase-config.js"></script>

<!-- logic -->
<script src="assets/js/competition.js"></script>
</body>
</html>
